{
  "resourceType": "StructureMap",
  "id": "KBVPrErpMedicationFreetextMap",
  "url": "https://gematik.de/fhir/structure-comparer/StructureMap/KBVPrErpMedicationFreetextMap",
  "name": "KBVPrErpMedicationFreetextMap",
  "status": "active",
  "version": "1.1",
  "date": "2025-12-09",
  "description": "Auto-generated StructureMap for KBV_PR_ERP_Medication_Compounding|1.3.2, KBV_PR_ERP_Medication_FreeText|1.3.2, KBV_PR_ERP_Medication_Ingredient|1.3.2, KBV_PR_ERP_Medication_PZN|1.3.2 -> EPAMedication|1.0.6-2",
  "structure": [
    {
      "url": "https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_FreeText",
      "mode": "source",
      "alias": "KBVPRERPMedicationCompounding"
    },
    {
      "url": "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication",
      "mode": "target",
      "alias": "EPAMedication"
    }
  ],
  "group": [
    {
      "name": "KBVPrErpMedicationFreetextMap",
      "typeMode": "types",
      "documentation": "Mapping generated for KBV_PR_ERP_Medication_Compounding|1.3.2, KBV_PR_ERP_Medication_FreeText|1.3.2, KBV_PR_ERP_Medication_Ingredient|1.3.2, KBV_PR_ERP_Medication_PZN|1.3.2 -> EPAMedication|1.0.6-2",
      "input": [
        {
          "name": "KBVPRERPMedicationCompounding",
          "type": "Medication",
          "mode": "source"
        },
        {
          "name": "EPAMedication",
          "type": "Medication",
          "mode": "target"
        }
      ],
      "rule": [
        {
          "name": "MedicationBatch235a7d75",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPMedicationCompounding",
              "element": "batch",
              "variable": "srcKBVPRERPMedicationCompoundingBatch76856f17"
            }
          ],
          "target": [
            {
              "context": "EPAMedication",
              "contextType": "variable",
              "element": "batch",
              "variable": "tgtEPAMedicationBatch90ce2ac1",
              "transform": "create",
              "parameter": [
                {
                  "valueString": "BackboneElement"
                }
              ]
            }
          ],
          "rule": [
            {
              "name": "MedicationBatchExpirationdate7b923bc0",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingBatch76856f17",
                  "variable": "srcMedicationBatchExpirationdate7b923bc0",
                  "element": "expirationDate"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationBatch90ce2ac1",
                  "contextType": "variable",
                  "element": "expirationDate",
                  "variable": "tgtMedicationBatchExpirationdate7b923bc0",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationBatchExpirationdate7b923bc0"
                    }
                  ]
                }
              ]
            },
            {
              "name": "MedicationBatchIdb8d14759",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingBatch76856f17",
                  "variable": "srcMedicationBatchIdb8d14759",
                  "element": "id"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationBatch90ce2ac1",
                  "contextType": "variable",
                  "element": "id",
                  "variable": "tgtMedicationBatchIdb8d14759",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationBatchIdb8d14759"
                    }
                  ]
                }
              ]
            },
            {
              "name": "MedicationBatchLotnumber690d6ea8",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingBatch76856f17",
                  "variable": "srcMedicationBatchLotnumber690d6ea8",
                  "element": "lotNumber"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationBatch90ce2ac1",
                  "contextType": "variable",
                  "element": "lotNumber",
                  "variable": "tgtMedicationBatchLotnumber690d6ea8",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationBatchLotnumber690d6ea8"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationCoded98e85bf",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPMedicationCompounding",
              "element": "code",
              "variable": "srcKBVPRERPMedicationCompoundingCode19fc48cb"
            }
          ],
          "target": [
            {
              "context": "EPAMedication",
              "contextType": "variable",
              "element": "code",
              "variable": "tgtEPAMedicationCodea6251800",
              "transform": "create",
              "parameter": [
                {
                  "valueString": "CodeableConcept"
                }
              ]
            }
          ],
          "rule": [
            {
              "name": "MedicationCodeCoding9b1e4117",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingCode19fc48cb",
                  "variable": "srcMedicationCodeCoding9b1e4117",
                  "element": "coding"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationCodea6251800",
                  "contextType": "variable",
                  "element": "coding",
                  "variable": "tgtMedicationCodeCoding9b1e4117",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationCodeCoding9b1e4117"
                    }
                  ]
                }
              ]
            },
            {
              "name": "MedicationCodeIdae69aeee",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingCode19fc48cb",
                  "variable": "srcMedicationCodeIdae69aeee",
                  "element": "id"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationCodea6251800",
                  "contextType": "variable",
                  "element": "id",
                  "variable": "tgtMedicationCodeIdae69aeee",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationCodeIdae69aeee"
                    }
                  ]
                }
              ]
            },
            {
              "name": "MedicationCodeText75c8453e",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingCode19fc48cb",
                  "variable": "srcMedicationCodeText75c8453e",
                  "element": "text"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationCodea6251800",
                  "contextType": "variable",
                  "element": "text",
                  "variable": "tgtMedicationCodeText75c8453e",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationCodeText75c8453e"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationForm5a0bbd5f",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPMedicationCompounding",
              "element": "form",
              "variable": "srcKBVPRERPMedicationCompoundingFormc5146e0b"
            }
          ],
          "target": [
            {
              "context": "EPAMedication",
              "contextType": "variable",
              "element": "form",
              "variable": "tgtEPAMedicationForm691ed321",
              "transform": "create",
              "parameter": [
                {
                  "valueString": "CodeableConcept"
                }
              ]
            }
          ],
          "rule": [
            {
              "name": "MedicationFormCodingEdqm8037629d",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingFormc5146e0b",
                  "variable": "srcMedicationFormCodingEdqm8037629d",
                  "element": "coding"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationForm691ed321",
                  "contextType": "variable",
                  "element": "coding",
                  "variable": "tgtMedicationFormCodingEdqm8037629d",
                  "transform": "create",
                  "parameter": [
                    {
                      "valueString": "Coding"
                    }
                  ]
                }
              ],
              "rule": [
                {
                  "name": "MedicationFormCodingEdqmCode122b7318",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingEdqm8037629d",
                      "variable": "srcMedicationFormCodingEdqmCode122b7318",
                      "element": "code"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingEdqm8037629d",
                      "contextType": "variable",
                      "element": "code",
                      "variable": "tgtMedicationFormCodingEdqmCode122b7318",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingEdqmCode122b7318"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingEdqmDisplaya28b19fe",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingEdqm8037629d",
                      "variable": "srcMedicationFormCodingEdqmDisplaya28b19fe",
                      "element": "display"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingEdqm8037629d",
                      "contextType": "variable",
                      "element": "display",
                      "variable": "tgtMedicationFormCodingEdqmDisplaya28b19fe",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingEdqmDisplaya28b19fe"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingEdqmIdacadef7a",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingEdqm8037629d",
                      "variable": "srcMedicationFormCodingEdqmIdacadef7a",
                      "element": "id"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingEdqm8037629d",
                      "contextType": "variable",
                      "element": "id",
                      "variable": "tgtMedicationFormCodingEdqmIdacadef7a",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingEdqmIdacadef7a"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingEdqmSystemd4f0f067",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingEdqm8037629d",
                      "variable": "srcMedicationFormCodingEdqmSystemd4f0f067"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingEdqm8037629d",
                      "contextType": "variable",
                      "element": "system",
                      "variable": "tgtMedicationFormCodingEdqmSystemd4f0f067",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueString": "http://standardterms.edqm.eu"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingEdqmUserselected68fcb4dc",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingEdqm8037629d",
                      "variable": "srcMedicationFormCodingEdqmUserselected68fcb4dc",
                      "element": "userSelected"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingEdqm8037629d",
                      "contextType": "variable",
                      "element": "userSelected",
                      "variable": "tgtMedicationFormCodingEdqmUserselected68fcb4dc",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingEdqmUserselected68fcb4dc"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingEdqmVersionfa7a3cbe",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingEdqm8037629d",
                      "variable": "srcMedicationFormCodingEdqmVersionfa7a3cbe",
                      "element": "version"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingEdqm8037629d",
                      "contextType": "variable",
                      "element": "version",
                      "variable": "tgtMedicationFormCodingEdqmVersionfa7a3cbe",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingEdqmVersionfa7a3cbe"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "name": "MedicationFormCodingKbvdarreichungsforme32ce40b",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingFormc5146e0b",
                  "variable": "srcMedicationFormCodingKbvdarreichungsforme32ce40b",
                  "element": "coding"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationForm691ed321",
                  "contextType": "variable",
                  "element": "coding",
                  "variable": "tgtMedicationFormCodingKbvdarreichungsforme32ce40b",
                  "transform": "create",
                  "parameter": [
                    {
                      "valueString": "Coding"
                    }
                  ]
                }
              ],
              "rule": [
                {
                  "name": "MedicationFormCodingKbvdarreichungsformCode174f9b5d",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "variable": "srcMedicationFormCodingKbvdarreichungsformCode174f9b5d",
                      "element": "code"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "contextType": "variable",
                      "element": "code",
                      "variable": "tgtMedicationFormCodingKbvdarreichungsformCode174f9b5d",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingKbvdarreichungsformCode174f9b5d"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingKbvdarreichungsformDisplay682d1abe",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "variable": "srcMedicationFormCodingKbvdarreichungsformDisplay682d1abe",
                      "element": "display"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "contextType": "variable",
                      "element": "display",
                      "variable": "tgtMedicationFormCodingKbvdarreichungsformDisplay682d1abe",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingKbvdarreichungsformDisplay682d1abe"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingKbvdarreichungsformId5c3a5dfc",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "variable": "srcMedicationFormCodingKbvdarreichungsformId5c3a5dfc",
                      "element": "id"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "contextType": "variable",
                      "element": "id",
                      "variable": "tgtMedicationFormCodingKbvdarreichungsformId5c3a5dfc",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingKbvdarreichungsformId5c3a5dfc"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingKbvdarreichungsformSystem24f022bc",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "variable": "srcMedicationFormCodingKbvdarreichungsformSystem24f022bc"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "contextType": "variable",
                      "element": "system",
                      "variable": "tgtMedicationFormCodingKbvdarreichungsformSystem24f022bc",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueString": "https://fhir.kbv.de/CodeSystem/KBV_CS_SFHIR_KBV_DARREICHUNGSFORM"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingKbvdarreichungsformUserselectedde379a25",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "variable": "srcMedicationFormCodingKbvdarreichungsformUserselectedde379a25",
                      "element": "userSelected"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "contextType": "variable",
                      "element": "userSelected",
                      "variable": "tgtMedicationFormCodingKbvdarreichungsformUserselectedde379a25",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingKbvdarreichungsformUserselectedde379a25"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingKbvdarreichungsformVersion5c1a3f46",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "variable": "srcMedicationFormCodingKbvdarreichungsformVersion5c1a3f46",
                      "element": "version"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingKbvdarreichungsforme32ce40b",
                      "contextType": "variable",
                      "element": "version",
                      "variable": "tgtMedicationFormCodingKbvdarreichungsformVersion5c1a3f46",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingKbvdarreichungsformVersion5c1a3f46"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "name": "MedicationFormCodingSnomed953e60c9",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingFormc5146e0b",
                  "variable": "srcMedicationFormCodingSnomed953e60c9",
                  "element": "coding"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationForm691ed321",
                  "contextType": "variable",
                  "element": "coding",
                  "variable": "tgtMedicationFormCodingSnomed953e60c9",
                  "transform": "create",
                  "parameter": [
                    {
                      "valueString": "Coding"
                    }
                  ]
                }
              ],
              "rule": [
                {
                  "name": "MedicationFormCodingSnomedCode51fd4f1d",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingSnomed953e60c9",
                      "variable": "srcMedicationFormCodingSnomedCode51fd4f1d",
                      "element": "code"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingSnomed953e60c9",
                      "contextType": "variable",
                      "element": "code",
                      "variable": "tgtMedicationFormCodingSnomedCode51fd4f1d",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingSnomedCode51fd4f1d"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingSnomedDisplay17c0c5c0",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingSnomed953e60c9",
                      "variable": "srcMedicationFormCodingSnomedDisplay17c0c5c0",
                      "element": "display"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingSnomed953e60c9",
                      "contextType": "variable",
                      "element": "display",
                      "variable": "tgtMedicationFormCodingSnomedDisplay17c0c5c0",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingSnomedDisplay17c0c5c0"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingSnomedId4fcf3578",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingSnomed953e60c9",
                      "variable": "srcMedicationFormCodingSnomedId4fcf3578",
                      "element": "id"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingSnomed953e60c9",
                      "contextType": "variable",
                      "element": "id",
                      "variable": "tgtMedicationFormCodingSnomedId4fcf3578",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingSnomedId4fcf3578"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingSnomedSystem14c3392a",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingSnomed953e60c9",
                      "variable": "srcMedicationFormCodingSnomedSystem14c3392a"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingSnomed953e60c9",
                      "contextType": "variable",
                      "element": "system",
                      "variable": "tgtMedicationFormCodingSnomedSystem14c3392a",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueString": "http://snomed.info/sct"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingSnomedUserselectede6846c06",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingSnomed953e60c9",
                      "variable": "srcMedicationFormCodingSnomedUserselectede6846c06",
                      "element": "userSelected"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingSnomed953e60c9",
                      "contextType": "variable",
                      "element": "userSelected",
                      "variable": "tgtMedicationFormCodingSnomedUserselectede6846c06",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingSnomedUserselectede6846c06"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "MedicationFormCodingSnomedVersionf2c08b93",
                  "source": [
                    {
                      "context": "srcMedicationFormCodingSnomed953e60c9",
                      "variable": "srcMedicationFormCodingSnomedVersionf2c08b93",
                      "element": "version"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationFormCodingSnomed953e60c9",
                      "contextType": "variable",
                      "element": "version",
                      "variable": "tgtMedicationFormCodingSnomedVersionf2c08b93",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationFormCodingSnomedVersionf2c08b93"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "name": "MedicationFormId893b4834",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingFormc5146e0b",
                  "variable": "srcMedicationFormId893b4834",
                  "element": "id"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationForm691ed321",
                  "contextType": "variable",
                  "element": "id",
                  "variable": "tgtMedicationFormId893b4834",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationFormId893b4834"
                    }
                  ]
                }
              ]
            },
            {
              "name": "MedicationFormTexta60d9090",
              "source": [
                {
                  "context": "srcKBVPRERPMedicationCompoundingFormc5146e0b",
                  "variable": "srcMedicationFormTexta60d9090",
                  "element": "text"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationForm691ed321",
                  "contextType": "variable",
                  "element": "text",
                  "variable": "tgtMedicationFormTexta60d9090",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationFormTexta60d9090"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationId034aa67d",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPMedicationCompounding",
              "element": "id",
              "variable": "srcKBVPRERPMedicationCompoundingId10654b67"
            }
          ],
          "target": [
            {
              "context": "EPAMedication",
              "contextType": "variable",
              "element": "id",
              "variable": "tgtEPAMedicationId43c6d2b2",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPMedicationCompoundingId10654b67"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}